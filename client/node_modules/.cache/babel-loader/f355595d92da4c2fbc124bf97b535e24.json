{"ast":null,"code":"var _jsxFileName = \"C:\\\\projects\\\\E_Commerce-App\\\\client\\\\src\\\\components\\\\Auth\\\\SignIn\\\\SignIn.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { FormControl, Input, InputLabel, Button, Grid, Typography, TextField } from \"@material-ui/core\";\nimport isEmail from \"validator/lib/isEmail\";\nimport isEmpty from \"validator/lib/isEmpty\";\nimport useStyles from \"./styles\";\nimport { showSuccessMsg } from \"../../../helper/showSuccessMsg\";\nimport { showErrorMsg } from \"../../../helper/showErrorMsg\";\nimport { Loading } from \"../../../helper/Loading\";\nimport { signIn } from \"../../../api/auth.js\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport { isAuthenticated, setAuthentication } from \"../../../helper/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SignIn = () => {\n  _s();\n\n  const history = useHistory();\n  const classes = useStyles();\n  useEffect(() => {\n    if (isAuthenticated() && isAuthenticated().role == 1) {\n      history.push(\"/admin/dashboard\");\n    } else if (isAuthenticated() && isAuthenticated().role == 0) {\n      history.push(\"/user/dashboard\");\n    }\n  }, [history]);\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n    errorMsg: false,\n    loading: false,\n    redirectToDashboard: false\n  });\n  const {\n    email,\n    password,\n    errorMsg,\n    loading\n  } = formData;\n\n  const handlechange = e => {\n    setFormData({ ...formData,\n      [e.target.name]: e.target.value,\n      errorMsg: ''\n    });\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (isEmpty(email) || isEmpty(password)) {\n      setFormData({ ...formData,\n        errorMsg: \"All Fields are Required\"\n      });\n    } else if (!isEmail(email)) {\n      setFormData({ ...formData,\n        errorMsg: \"Invalid Email\"\n      });\n    } else {\n      const {\n        email,\n        password\n      } = formData;\n      const data = {\n        email,\n        password\n      };\n      setFormData({ ...formData,\n        loading: false\n      });\n      signIn(data).then(response => {\n        setAuthentication(response.data.token, response.data.user);\n\n        if (isAuthenticated() && isAuthenticated().role == 1) {\n          history.push(\"/admin/dashboard\");\n        } else {\n          history.push(\"/user/dashboard\");\n        }\n      }).catch(err => {\n        console.log(err.response.data.errorMsg);\n        setFormData({ ...formData,\n          loading: false,\n          errorMsg: err.response.data.errorMessage\n        });\n        console.log(\"Signin api Function Error\", err);\n      });\n    }\n  }; //   signUp(data)\n  //     .then(response => {\n  //       console.log(response);\n  //       setFormData({\n  //         username: \"\",\n  //         email: \"\",\n  //         password: \"\",\n  //         password2: \"\",\n  //         successMsg: response.data.successMessage,\n  //         loading: false,\n  //         errorMsg,\n  //       })\n  //     })\n  //     .catch(err => {\n  //       console.log(\"Axxios Sign Up error\", err, err.response);\n  //       setFormData({ ...formData, loading: false, errorMsg: err.response.data.errorMessage });\n  //     })\n  // }\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.parent,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: classes.form,\n        children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.loading,\n          children: Loading()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 23\n        }, this), errorMsg && showErrorMsg(errorMsg), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          style: {\n            textAlign: \"center\"\n          },\n          children: \"Sign In \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          required: true,\n          fullWidth: true,\n          margin: \"normal\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            variant: \"outlined\",\n            className: classes.inp,\n            name: \"email\",\n            value: email,\n            label: \"Email\",\n            type: \"email\",\n            autoComplete: \"email\",\n            onChange: handlechange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n          required: true,\n          fullWidth: true,\n          margin: \"normal\",\n          children: /*#__PURE__*/_jsxDEV(TextField, {\n            id: \"outlined\",\n            variant: \"outlined\",\n            className: classes.inp,\n            name: \"password\",\n            value: password,\n            label: \"Password\",\n            onChange: handlechange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          fullWidth: true,\n          variant: \"outlined\",\n          color: \"primary\",\n          type: \"submit\",\n          onClick: handleSubmit,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: [\"Don't have an Account? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/signup\",\n            children: \"SignUp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 70\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: JSON.stringify(formData)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(SignIn, \"tobkG5KlLq3evigAv+7isRUCDmg=\", false, function () {\n  return [useHistory, useStyles];\n});\n\n_c = SignIn;\nexport default SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["C:/projects/E_Commerce-App/client/src/components/Auth/SignIn/SignIn.js"],"names":["React","useState","useEffect","CssBaseline","FormControl","Input","InputLabel","Button","Grid","Typography","TextField","isEmail","isEmpty","useStyles","showSuccessMsg","showErrorMsg","Loading","signIn","Link","useHistory","isAuthenticated","setAuthentication","SignIn","history","classes","role","push","formData","setFormData","email","password","errorMsg","loading","redirectToDashboard","handlechange","e","target","name","value","handleSubmit","preventDefault","data","then","response","token","user","catch","err","console","log","errorMessage","parent","form","textAlign","inp","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react'\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport { FormControl, Input, InputLabel, Button, Grid, Typography,TextField } from \"@material-ui/core\";\r\nimport isEmail from \"validator/lib/isEmail\"\r\nimport isEmpty from \"validator/lib/isEmpty\"\r\nimport useStyles from \"./styles\"\r\nimport { showSuccessMsg } from \"../../../helper/showSuccessMsg\"\r\nimport { showErrorMsg } from \"../../../helper/showErrorMsg\"\r\nimport { Loading } from \"../../../helper/Loading\"\r\nimport { signIn } from \"../../../api/auth.js\"\r\nimport { Link,useHistory } from \"react-router-dom\"\r\nimport { isAuthenticated, setAuthentication } from \"../../../helper/auth\"\r\nconst SignIn = () => {\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated() && isAuthenticated().role == 1) {\r\n      history.push(\"/admin/dashboard\");\r\n    }\r\n    else if (isAuthenticated() && isAuthenticated().role == 0) {\r\n      history.push(\"/user/dashboard\");\r\n    }\r\n  }, [history])\r\n\r\n\r\n  const [formData, setFormData] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    errorMsg: false,\r\n    loading: false,\r\n    redirectToDashboard: false,\r\n  })\r\n  const {\r\n    email,\r\n    password,\r\n    errorMsg,\r\n    loading\r\n  } = formData;\r\n\r\n\r\n\r\n  const handlechange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value, errorMsg: '' })\r\n  }\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (isEmpty(email) || isEmpty(password)) {\r\n      setFormData({\r\n        ...formData, errorMsg: \"All Fields are Required\"\r\n      })\r\n    } else if (!isEmail(email)) {\r\n      setFormData({\r\n        ...formData, errorMsg: \"Invalid Email\"\r\n      })\r\n    }\r\n    else {\r\n      const { email, password } = formData;\r\n      const data = { email, password };\r\n      setFormData({\r\n        ...formData, loading: false\r\n      })\r\n      signIn(data)\r\n        .then(response => {\r\n          setAuthentication(response.data.token, response.data.user)\r\n\r\n          if (isAuthenticated() && isAuthenticated().role == 1) {\r\n            history.push(\"/admin/dashboard\");\r\n          }\r\n          else {\r\n            history.push(\"/user/dashboard\");\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err.response.data.errorMsg)\r\n          setFormData({\r\n            ...formData,\r\n            loading : false,\r\n            errorMsg: err.response.data.errorMessage\r\n          })\r\n          console.log(\"Signin api Function Error\", err);\r\n\r\n        })\r\n    }\r\n  }\r\n  //   signUp(data)\r\n  //     .then(response => {\r\n  //       console.log(response);\r\n  //       setFormData({\r\n  //         username: \"\",\r\n  //         email: \"\",\r\n  //         password: \"\",\r\n  //         password2: \"\",\r\n  //         successMsg: response.data.successMessage,\r\n  //         loading: false,\r\n  //         errorMsg,\r\n  //       })\r\n  //     })\r\n  //     .catch(err => {\r\n  //       console.log(\"Axxios Sign Up error\", err, err.response);\r\n  //       setFormData({ ...formData, loading: false, errorMsg: err.response.data.errorMessage });\r\n  //     })\r\n  // }\r\n\r\n  return (\r\n    <>\r\n      <CssBaseline />\r\n      <div className={classes.parent}>\r\n\r\n        <form className={classes.form}>\r\n          {loading && <div className={classes.loading}>{Loading()}</div>}\r\n          {errorMsg && showErrorMsg(errorMsg)}\r\n          <Typography variant=\"h5\" style={{ textAlign: \"center\" }}>Sign In </Typography>\r\n          <FormControl required fullWidth margin=\"normal\">\r\n            <TextField\r\n              variant=\"outlined\"\r\n              className={classes.inp}\r\n              name=\"email\"\r\n              value={email}\r\n              label=\"Email\"\r\n              type=\"email\"\r\n              autoComplete=\"email\"\r\n              onChange={handlechange}\r\n            />\r\n          </FormControl>\r\n          <FormControl required fullWidth margin=\"normal\">\r\n            <TextField\r\n              id=\"outlined\"\r\n              variant=\"outlined\"\r\n              className={classes.inp}\r\n              name=\"password\"\r\n              value={password}\r\n              label=\"Password\"\r\n              onChange={handlechange}\r\n            />\r\n          </FormControl>\r\n          <Button\r\n            fullWidth\r\n     \r\n            variant=\"outlined\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            onClick={handleSubmit}\r\n          >\r\n            Login\r\n              </Button>\r\n          <p style={{ textAlign: \"center\", }}>Don't have an Account? <Link to=\"/signup\">SignUp</Link></p>\r\n        </form>\r\n      </div>\r\n\r\n      <p>{JSON.stringify(formData)}</p>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default SignIn\r\n"]},"metadata":{},"sourceType":"module"}